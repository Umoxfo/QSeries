<?xml version="1.0"?>
<!--
*********************************************************************************************
Bombardier QSeries: This file contains stuff used in all variants (Benedikt Wolf/D-ECHO 2019)
*********************************************************************************************
-->
<PropertyList>
	<sim>
		
		<tags>
			<tag>transport</tag>
			<tag>bombardier</tag>
			<tag>1980s</tag>
			<tag>1990s</tag>
			<tag>2000s</tag>
			<tag>2010s</tag>
			<tag>ifr</tag>
			<tag>retractable-gear</tag>
			<tag>glass-cockpit</tag>
			<tag>pressurised</tag>
			<!--tag>dual-controls</tag-->
			<!-- Coming Soon ;) -->
			<tag>turboprop</tag>
			<tag>2-engine</tag>
		</tags>
		
		<model>
			<start-idling type="bool">0</start-idling>
			<rendering>                
				<rain-enabled type="int">2</rain-enabled>
				<reflection-enabled type="int">1</reflection-enabled>
				<reflection-type type="int">1</reflection-type>
				<reflection-dynamic type="int">1</reflection-dynamic>
				<reflection-correction type="float">-0.6</reflection-correction>
				<reflection-fresnel type="float">0.0</reflection-fresnel>
				<reflection-fresnel-factor type="float">0.7</reflection-fresnel-factor>
				<reflection-rainbow type="float">0.0</reflection-rainbow>
				<reflection-noise type="float">0.00</reflection-noise>
				<ambient-correction type="float">0.15</ambient-correction>
			</rendering>
			<open-cabin-doors type="bool">1</open-cabin-doors>
			<pushback>
				<position-norm type="float">0</position-norm>
				<kp type="float">250</kp>
				<ki type="float">0</ki>
				<kd type="float">0</kd>
			</pushback>
		</model>
		
		<q400><!--TODO rename to qseries -> where is it used?-->
			<popups-enabled type="bool">1</popups-enabled>
		</q400>
		
		
		<instrumentation>
			<path>Aircraft/QSeries/Systems/instrumentation.xml</path>
		</instrumentation>
		
		<sound>
			<path>Aircraft/QSeries/Sounds/dhc8-sound.xml</path>
		</sound>
		
		<flaps>
			<setting>0.000</setting>
			<setting>0.143</setting>
			<setting>0.286</setting>
			<setting>0.429</setting>
			<setting>1.000</setting>
		</flaps>
		
		<virtual-cockpit>true</virtual-cockpit>
		<allow-toggle-cockpit>true</allow-toggle-cockpit>
		
		<help>
			<key>
				<name>w</name>
				<desc>Walk forward towards view</desc>
			</key>
			<key>
				<name>Del</name>
				<desc>Toggle Thrust Reversers</desc>
			</key>
			<key>
				<name>m</name>
				<desc>Conditions Levers forward</desc>
			</key>
			<key>
				<name>M</name>
				<desc>Conditions Levers backward</desc>
			</key>
			<title>Bombardier Q400</title>
			<line>take off speed with flaps 15% = 87knts @ 30000lb</line>
			<line>landing speed with 15% flaps = 110knots @ 30000lb</line>
		</help>
		
		<yokes-visible type="bool">1</yokes-visible>
		
		<systems>
			<electrical>
				<path/>
				<outputs>
					<nav-lights-norm type="int">0</nav-lights-norm>
					<taxi-lights-norm type="int">0</taxi-lights-norm>
					<landing-light-norm type="int">0</landing-light-norm>
					<landing-light-norm type="int" n="1">0</landing-light-norm>
				</outputs>
			</electrical>
			<autopilot n="0">
				<path>Aircraft/QSeries/Systems/it-autoflight.xml</path>
			</autopilot><!--
			<autopilot n="2">
				<path>Aircraft/QSeries/Systems/propcontroller.xml</path>
			</autopilot>-->
			<property-rule n="100">
				<path>Aircraft/QSeries/Systems/pfd.xml</path>
			</property-rule>
			<property-rule n="101">
				<path>Aircraft/QSeries/Systems/MFD.xml</path>
			</property-rule>
			<property-rule n="102">
				<path>Aircraft/QSeries/Systems/model.xml</path>
			</property-rule>
		</systems>
		
		<chase-distance-m>-60</chase-distance-m>
		
		<aircraft-data>
			<path>/fdm/jsbsim/inertia/pointmass-weight-lbs[0]</path>
			<path>/fdm/jsbsim/inertia/pointmass-weight-lbs[1]</path>
			<path>/fdm/jsbsim/inertia/pointmass-weight-lbs[2]</path>
			<path>/fdm/jsbsim/inertia/pointmass-weight-lbs[3]</path>
		</aircraft-data>
	</sim>
	
        
	<systems>
		<electrical>
			<lighting>
				<landing-light type="bool">0</landing-light>
				<logo-light type="bool">0</logo-light>
			</lighting>
			<volts type="float">0</volts>
		</electrical>
	</systems>
	
	<it-autoflight>
		<config>
			<roll>
				<kp-low>0.05</kp-low> <!-- Kp at low speed -->
				<kp-high>0.01</kp-high> <!-- Kp at high speed -->
				<ti>1.0</ti>
				<td>0.0001</td>
			</roll>
			<pitch>
				<kp-low>-0.05</kp-low> <!-- Kp at low speed -->
				<kp-high>-0.01</kp-high> <!-- Kp at high speed -->
				<ti>0.5</ti>
				<td>0.001</td>
			</pitch>
			<cmd>
				<hdg>-1.3</hdg>
				<vorloc>-2.6</vorloc>
				<alt-gain>-5</alt-gain>
			</cmd>
			<autoland> 
				<pitch-kp>0.0051</pitch-kp>
				<yaw-kp>-0.05</yaw-kp>
			</autoland>
			<rollout>
				<roll-kp>-0.1</roll-kp>
				<pitch-defl>0.15</pitch-defl>
				<yaw-kp>-0.02</yaw-kp>
			</rollout>
		</config>
		<settings>
			<nav-source type="string">NAV1</nav-source>
			<auto-bank-max-deg>25</auto-bank-max-deg> <!-- Maximum Auto Bank Limit -->
			<disable-final>0</disable-final> <!-- Disable the Final Controllers -->
			<land-enable>0</land-enable> <!-- Enable/Disable Autoland -->
			<land-flap>0.7</land-flap> <!-- Minimum Flap used for Landing -->
			<retard-ft>50</retard-ft> <!-- Enable Thrust Retard -->
			<retard-enable>0</retard-enable> <!-- AGL to Thrust Retard -->
			<togaspd>141</togaspd> <!-- V2 + 10kts -->
			<lat-agl-ft>50</lat-agl-ft> <!-- Set to 999999 if you do not want T/O to change automatically to LNAV (if armed) -->
			<reduc-agl-ft>1500</reduc-agl-ft> <!-- Set to 999999 if you do not want TOGA to change automatically to FLCH -->
			<autoland-without-ap>0</autoland-without-ap> <!-- Engage LAND and FLARE Modes even if the AP is off -->
		</settings>
		<input>
			<yd>0</yd>
		</input>
		<output>
			<ap1>0</ap1>
			<ap2>0</ap2>
			<lat>0</lat>
		</output>
	</it-autoflight>
	
	<position>
		<gear-agl-ft>0</gear-agl-ft>
	</position>
	


	<controls>
		<flight>
			<spoilers type="float">0</spoilers>
			<spoilers-int type="float">0</spoilers-int>
			<flaps-int type="float">0</flaps-int>
			<elevator-int type="float">0</elevator-int>
			<rudder-int type="float">0</rudder-int>
		</flight>
		<APU>
			<master type="bool">0</master>
			<start type="bool">0</start>
			<generator type="bool">0</generator>
			<bleedair type="bool">0</bleedair>
			<selftest type="float">0</selftest>
		</APU>
		<electric>
			<battery-switch type="bool">1</battery-switch>
			<avionics-switch type="bool">1</avionics-switch>
			<external-power type="bool">1</external-power>
			<engine n="0">
				<generator>false</generator>
			</engine>
			<engine n="1">
				<generator>false</generator>
			</engine>
			<wipers>
				<switch type="bool">0</switch>
				<position-norm type="double">0</position-norm>
			</wipers>
			<left-aux-pump type="bool">0</left-aux-pump>
			<right-aux-pump type="bool">0</right-aux-pump>
			<power-source>1</power-source>
			<autostart type="bool">0</autostart>
		</electric>
		<gear>
			<nose-steering-int type="double">0</nose-steering-int>
			<gear-down-int type="float">1</gear-down-int>
			<jacks>0</jacks>
			<brake-parking>1</brake-parking>
			<brake-parking-position>1</brake-parking-position>
			<tiller-cmd-norm type="float">0</tiller-cmd-norm>
			<tiller-enabled type="int">0</tiller-enabled>
			<tiller-disabled type="int">0</tiller-disabled>
		</gear>
		<lighting>
			<instrument-lights>1</instrument-lights>
			<strobe>1</strobe>
			<beacon>1</beacon>
			<landing-lights>1</landing-lights>
			<nav-lights>1</nav-lights>
			<pfd-norm>1</pfd-norm>
			<panel>
				<glareshield type="double">0</glareshield>
				<overhead type="double">0</overhead>
				<engine type="double">0</engine>
				<center type="double">0</center>
			</panel>
			<panel-lights type="bool">0</panel-lights>
		</lighting>
		<engines>
			<internal-engine-starter type="int">0</internal-engine-starter>
			<internal-engine-starter-selector type="int">0</internal-engine-starter-selector>
			<throttle-lock type="double">0</throttle-lock>
			<throttle-lock-position type="double">0</throttle-lock-position>
			<internal-engine-starter>0</internal-engine-starter>
			<fire-test type="bool">0</fire-test>
			<engine n="0">
				<condition-lever-state type="int">0</condition-lever-state>
				<condition-lever-pos type="float">0</condition-lever-pos>
				<cutoff-cmd type="bool">0</cutoff-cmd>
				<condition type="double">0</condition>
				<mixture>0</mixture>
				<propeller-pitch>0</propeller-pitch>
				<throttle-fwd type="double">0</throttle-fwd>
				<throttle-int type="double">0</throttle-int>
				<throttle-rvrs type="double">0</throttle-rvrs>
				<reverser-position type="double">0</reverser-position>
				<ignition-switch type="int">0</ignition-switch>
			</engine>
			<engine n="1">
				<condition-lever-state type="int">0</condition-lever-state>
				<condition-lever-pos type="float">0</condition-lever-pos>
				<cutoff-cmd type="bool">0</cutoff-cmd>
				<condition type="double">0</condition>
				<mixture>0</mixture>
				<propeller-pitch>0</propeller-pitch>
				<throttle-fwd type="double">0</throttle-fwd>
				<throttle-int type="double">0</throttle-int>
				<throttle-rvrs type="double">0</throttle-rvrs>
				<reverser-position type="double">0</reverser-position>
				<ignition-switch type="int">0</ignition-switch>
			</engine>
		</engines>
	</controls>
	
	<consumables>
		<fuel>
			<tank n="0">
				<name>Left Tank</name>
			</tank>
			<tank n="1">
				<name>Right Tank</name>
			</tank>
		</fuel>
	</consumables>
	
	<instrumentation>
		<IESI>
			<brightness-norm type="float">0.8</brightness-norm>
			<std-pressed type="bool">0</std-pressed>
			<plus-pressed type="bool">0</plus-pressed>
			<minus-pressed type="bool">0</minus-pressed>
			<cage-pressed type="bool">0</cage-pressed>
		</IESI>
		<TEAM>
			<brightness-norm type="float">0.8</brightness-norm>
			<selftest type="bool">0</selftest>
			<was_0 type="bool">0</was_0>
		</TEAM>
		<ED>
			<brightness-norm type="float">0.8</brightness-norm>
		</ED>
		<altimeter>
			<millibars type="double">0</millibars>
		</altimeter>
		<adf n="0">
			<frequencies>
				<standby-1khz type="float">0</standby-1khz>
				<standby-10khz type="float">0</standby-10khz>
			</frequencies>
		</adf>
		<adf n="1">
			<frequencies>
				<standby-1khz type="float">0</standby-1khz>
				<standby-10khz type="float">0</standby-10khz>
			</frequencies>
		</adf>
		<transponder>
			<inputs>
				<serviceable type="bool">true</serviceable>
			</inputs>
		</transponder>
		<nav n="0">
			<serviceable type="bool">1</serviceable>
		</nav>
		<nav n="1">
			<serviceable type="bool">1</serviceable>
		</nav>
		<comm n="0">
			<serviceable type="bool">1</serviceable>
		</comm>
		<comm n="1">
			<serviceable type="bool">1</serviceable>
		</comm>
		<eng-gauge>
			<itt n="0" type="double">0</itt>
			<itt n="1" type="double">0</itt>
			<torque n="0" alias="/engines/engine/torque-ftlb"/>
			<torque n="1" alias="/engines/engine[1]/torque-ftlb"/>
			<prop n="0" alias="/engines/engine/rpm"/>
			<prop n="1" alias="/engines/engine[1]/rpm"/>
			<turbine n="0" alias="/engines/engine/n1"/>
			<turbine n="1" alias="/engines/engine[1]/n1"/>
			<fuel-pph n="0" type="double">0</fuel-pph>
			<fuel-pph n="1" type="double">0</fuel-pph>
			<oil-psi-norm n="0" type="double">0</oil-psi-norm>
			<oil-psi-norm n="1" type="double">0</oil-psi-norm>
			<oil-temp-norm n="0" type="double">0</oil-temp-norm>
			<oil-temp-norm n="1" type="double">0</oil-temp-norm>
		</eng-gauge>
		<team>
			<running type="int">0</running>
			<test type="double">0</test>
		</team>
		<radar-altimeter>
			<serviceable type="bool">1</serviceable>
		</radar-altimeter>
		<transponder>
			<inputs>
				<knob-mode type="int">5</knob-mode>
			</inputs>
		</transponder>
	</instrumentation>
	<engines>
		<APU>
			<rpm type="double">0</rpm>
			<running type="bool">0</running>
			<plugged type="bool">0</plugged>
		</APU>
		<engine n="0">
			<running>0</running>
			<rpm>0</rpm>
			<fuel-flow_pph type="float">0</fuel-flow_pph>
			<n2 type="double">0</n2>
		</engine>
		<engine n="1">
			<running>0</running>
			<rpm>0</rpm>
			<fuel-flow_pph type="float">0</fuel-flow_pph>
				<n2 type="double">0</n2>
		</engine>
	</engines>
	
	<environment>
		<turbulence>
			<use-cloud-turbulence>true</use-cloud-turbulence>
		</turbulence>
	</environment>
	
	<input>
		<keyboard>
		<!--
			<key n="119">
				<name>w</name>
				<desc>Walk forward toward view</desc>
				<repeatable type="bool">true</repeatable>
				<binding>
						<command>nasal</command>
						<script>
							walk.walk_about(0.1);
						</script>
				</binding>
			</key>-->
			<key n="113">
				<name>q</name>
				<desc>Disengage Autopilot</desc>
				<repeatable type="bool">true</repeatable>
				<binding>
					<command>property-assign</command>
					<property>it-autoflight/input/ap1</property>
				<value>0</value>
				</binding>
				<binding>
					<command>property-assign</command>
					<property>it-autoflight/input/ap2</property>
					<value>0</value>
				</binding>
				<binding>
					<command>property-assign</command>
					<property>/controls/autopilot/disengage-pressed</property>
					<value>1</value>
				</binding>
				<mod-up>
					<binding>
						<command>property-assign</command>
						<property>/controls/autopilot/disengage-pressed</property>
						<value>0</value>
					</binding>
				</mod-up>
			</key>
			<key n="127">
				<name>Delete</name>
				<desc>Toggle Reversers</desc>
				<binding>
					<condition>
						<equals>
							<property>controls/engines/engine[0]/throttle</property>
							<value>0</value>
						</equals>
					</condition>
					<command>property-toggle</command>
					<property>controls/engines/engine[0]/reverser</property>
				</binding>
				<binding>
					<condition>
						<equals>
							<property>controls/engines/engine[1]/throttle</property>
							<value>0</value>
						</equals>
					</condition>
					<command>property-toggle</command>
					<property>controls/engines/engine[1]/reverser</property>
				</binding>
			</key>
			<key n="77">
				<name>M</name>
				<desc>Condition Lever Backward</desc>
				<repeatable type="bool">true</repeatable>
				<binding>
					<command>property-cycle</command>
					<property>controls/engines/engine[0]/condition-lever-state</property>
					<value>0</value><!--FUEL OFF-->
					<value>4</value><!--MAX 1020-->
					<value>3</value><!--900-->
					<value>2</value><!--MIN 850-->
					<value>1</value><!--START&FEATHER-->
				</binding>
				<binding>
					<command>property-cycle</command>
					<property>controls/engines/engine[1]/condition-lever-state</property>
					<value>0</value><!--FUEL OFF-->
					<value>4</value><!--MAX 1020-->
					<value>3</value><!--900-->
					<value>2</value><!--MIN 850-->
					<value>1</value><!--START&FEATHER-->
				</binding>
			</key>
			<key n="109">
				<name>m</name>
				<desc>Condition Lever Forward</desc>
				<repeatable type="bool">true</repeatable>
				<binding>
					<command>property-cycle</command>
					<property>controls/engines/engine[0]/condition-lever-state</property>
					<value>1</value><!--START&FEATHER-->
					<value>2</value><!--MIN 850-->
					<value>3</value><!--900-->
					<value>4</value><!--MAX 1020-->
					<value>0</value><!--FUEL OFF-->
				</binding>
				<binding>
					<command>property-cycle</command>
					<property>controls/engines/engine[1]/condition-lever-state</property>
					<value>1</value><!--START&FEATHER-->
					<value>2</value><!--MIN 850-->
					<value>3</value><!--900-->
					<value>4</value><!--MAX 1020-->
					<value>0</value><!--FUEL OFF-->
				</binding>
			</key>
			<key n="127">
				<name>Delete</name>
				<desc>Toggle Reversers</desc>
				<binding>
					<command>property-toggle</command>
					<property>controls/engines/engine[0]/reverser</property>
				</binding>
				<binding>
					<command>property-toggle</command>
					<property>controls/engines/engine[1]/reverser</property>
				</binding>
			</key>
		</keyboard>
	</input>
	
	<nasal>
		<!--dialogs>
			<file>gui/dialogs/fuelpayload.nas</file>
		</dialogs-->
		<itaf>
			<file>Aircraft/QSeries/Nasal/it-autoflight.nas</file>
		</itaf>
		<systems>
			<file>Nasal/APU.nas</file>
			<file>Nasal/Electrical.nas</file>
			<file>Nasal/hydraulics.nas</file>
			<file>Nasal/fuel.nas</file>
			<file>Nasal/pneumatics.nas</file><!--
			<file>Nasal/engines.nas</file>-->
		</systems>
		<doors>
			<file>Nasal/doors.nas</file>
		</doors><!--
		<walk>
			<file>Nasal/walk.nas</file>
		</walk-->
		<dialogs>
			<file>Nasal/dialogs.nas</file>
		</dialogs>
	</nasal>
</PropertyList>
