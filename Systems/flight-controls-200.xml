<?xml version="1.0" encoding="ISO-8859-1"?>

<PropertyList>
	
	<!-- Airspeed Below 130 switch (gear warning horn) -->
	<logic>
		<inverted>false</inverted>
		<input>
			<less-than>
				<property>instrumentation/airspeed-indicator/indicated-speed-kt</property>
				<value>130</value>
			</less-than>
		</input>
		<output>instrumentation/airspeed-indicator/speed-below-130</output>
	</logic>

<!-- ELEVATOR -->

  <filter>
    <name>Elevator</name>
    <type>gain</type>
    <input>
      <property>/controls/flight/elevator</property>
    </input>
    <gain>1</gain>
    <output>controls/flight/elevator-int</output>
  </filter>

<!-- RUDDER -->

  <filter>
    <name>Rudder</name>
    <type>gain</type>
    <input>
      <property>/controls/flight/rudder</property>
    </input>
    <enable>
        <condition>
            <or>
                <greater-than>
                    <property>/systems/hydraulic/psi-main-1</property>
                    <value>2900</value>
                </greater-than>
                <greater-than>
                    <property>/systems/hydraulic/psi-main-2</property>
                    <value>2900</value>
                </greater-than>
            </or>
        </condition>
    </enable>
    <gain>1</gain>
    <output>controls/flight/rudder-int</output>
  </filter>

	<!-- ROLL SPOILER -->
	<filter>
		<name>Roll Spoiler Left</name>
		<type>gain</type>
		<input>
			<expression>
				<table>
					<property>/controls/flight/aileron</property>
					<entry><ind> -1.0</ind><dep> 1.0</dep></entry>
					<entry><ind>  0.0</ind><dep> 0.0</dep></entry>
					<entry><ind>  1.0</ind><dep> 0.0</dep></entry>
				</table>
			</expression>
		</input>
		<gain>1</gain>
		<output>controls/flight/spoiler-left</output>
	</filter>
	<filter>
		<name>Roll Spoiler Right</name>
		<type>gain</type>
		<input>
			<expression>
				<table>
					<property>/controls/flight/aileron</property>
					<entry><ind> -1.0</ind><dep> 0.0</dep></entry>
					<entry><ind>  0.0</ind><dep> 0.0</dep></entry>
					<entry><ind>  1.0</ind><dep> 1.0</dep></entry>
				</table>
			</expression>
		</input>
		<gain>1</gain>
		<output>controls/flight/spoiler-right</output>
	</filter>
	<filter>
		<name>Roll Spoiler Inbd Left</name>
		<type>gain</type>
		<input>
			<property>controls/flight/spoiler-left</property>
		</input>
		<enable>
			<condition>
				<greater-than>
				<property>/systems/hydraulic/psi-main-1</property>
				<value>2900</value>
				</greater-than>
			</condition>
		</enable>
		<gain>1</gain>
		<output>controls/flight/spoiler-inbd-left</output>
	</filter>
	<filter>
		<name>Roll Spoiler Inbd Right</name>
		<type>gain</type>
		<input>
			<property>controls/flight/spoiler-right</property>
		</input>
		<enable>
			<condition>
				<greater-than>
				<property>/systems/hydraulic/psi-main-1</property>
				<value>2900</value>
				</greater-than>
			</condition>
		</enable>
		<gain>1</gain>
		<output>controls/flight/spoiler-inbd-right</output>
	</filter>
	<filter>
		<name>Roll Spoiler Outbd Left</name>
		<type>gain</type>
		<input>
			<condition>
				<less-than-equals>
					<property>instrumentation/airspeed-indicator/indicated-speed-kt</property>
					<value>140</value>
				</less-than-equals>
			</condition>
			<property>controls/flight/spoiler-left</property>
		</input>
		<input>
			<condition>
				<greater-than>
					<property>instrumentation/airspeed-indicator/indicated-speed-kt</property>
					<value>140</value>
				</greater-than>
			</condition>
			<value>0</value>
		</input>
		<enable>
			<condition>
				<greater-than>
					<property>/systems/hydraulic/psi-main-2</property>
					<value>2900</value>
				</greater-than>
			</condition>
		</enable>
		<gain>1</gain>
		<output>controls/flight/spoiler-outbd-left</output>
	</filter>
	<filter>
		<name>Roll Spoiler Outbd Right</name>
		<type>gain</type>
		<input>
			<condition>
				<less-than-equals>
					<property>instrumentation/airspeed-indicator/indicated-speed-kt</property>
					<value>140</value>
				</less-than-equals>
			</condition>
			<property>controls/flight/spoiler-right</property>
		</input>
		<input>
			<condition>
				<greater-than>
					<property>instrumentation/airspeed-indicator/indicated-speed-kt</property>
					<value>140</value>
				</greater-than>
			</condition>
			<value>0</value>
		</input>
		<enable>
			<condition>
				<greater-than>
					<property>/systems/hydraulic/psi-main-2</property>
					<value>2900</value>
				</greater-than>
			</condition>
		</enable>
		<gain>1</gain>
		<output>controls/flight/spoiler-outbd-right</output>
	</filter>

<!-- NOSE WHEEL STEERING -->

  <filter>
    <name>Nose Wheel Steering</name>
    <type>gain</type>
    <input>
      <property>/controls/flight/rudder</property>
    </input>
    <enable>
        <condition>
		<or>
			<greater-than>
				<property>/systems/hydraulic/psi2</property>
				<value>2900</value>
			</greater-than>
			<equals>
				<property>/sim/model/pushback/position-norm</property>
				<value>1</value>
			</equals>
		</or>
        </condition>
    </enable>
    <gain>1</gain>
    <output>controls/gear/nose-steering-int</output>
  </filter>
  
	<!--Power Lever Control Lock-->
	<filter>
		<name>Power Lever Control Left</name>
		<type>gain</type>
		<input>
			<expression>
				<prod>
					<property>/controls/engines/engine[0]/throttle</property>
					<table>
						<property>/controls/engines/throttle-lock-position</property>
						<entry><ind> 0.0</ind><dep> 1</dep></entry>
						<entry><ind> 1.0</ind><dep> 0.15</dep></entry>
					</table>
				</prod>
			</expression>
			<condition>
				<not>
					<property>/engines/engine[0]/reversed</property>				
				</not>
			</condition>
		</input>
		<input>
			<expression>
				<prod>
					<property>/controls/engines/engine[0]/throttle</property>
					<value>0.963</value> <!--1000 SHP available for reverse-->
				</prod>
			</expression>
			<condition>
				<property>/engines/engine[0]/reversed</property>
			</condition>
		</input>
		<gain>1.0</gain>
		<output>controls/engines/engine[0]/throttle-int</output>
	</filter>
	<filter>
		<name>Power Lever Control Right</name>
		<type>gain</type>
		<input>
			<expression>
				<prod>
					<property>/controls/engines/engine[1]/throttle</property>
					<table>
						<property>/controls/engines/throttle-lock-position</property>
						<entry><ind> 0.0</ind><dep> 1</dep></entry>
						<entry><ind> 1.0</ind><dep> 0.15</dep></entry>
					</table>
				</prod>
			</expression>
			<condition>
				<not>
					<property>/engines/engine[1]/reversed</property>				
				</not>
			</condition>
		</input>
		<input>
			<expression>
				<prod>
					<property>/controls/engines/engine[1]/throttle</property>
					<value>0.963</value> <!--1000 SHP available for reverse-->
				</prod>
			</expression>
			<condition>
				<property>/engines/engine[1]/reversed</property>
			</condition>
		</input>
		<gain>1.0</gain>
		<output>controls/engines/engine[1]/throttle-int</output>
	</filter>
  
  
  <!--THRUST DETENT MODES-->
	<!--the 200 has no thrust detent modes-->
	<!--
	http://www.smartcockpit.com/docs/Dash8-200-300-Powerplant.pdf
	
	-->
	<!--Propeller RPM-->
  <filter>
	  <name>PROP RPM L</name>
    <type>gain</type>
    <input>
	    <property>/controls/engines/engine[0]/condition-lever-set</property>
    </input>
    <enable>
        <condition>
		<equals>
			<property>/controls/engines/engine[0]/condition-lever-state</property>
			<value>2</value>
		</equals>
        </condition>
    </enable>
    <gain>1</gain>
	<output>/controls/engines/engine[0]/propeller-pitch</output>
  </filter>
  <filter>
	  <name>PROP RPM R</name>
    <type>gain</type>
    <input>
	    <property>/controls/engines/engine[1]/condition-lever-set</property>
    </input>
    <enable>
        <condition>
		<equals>
			<property>/controls/engines/engine[1]/condition-lever-state</property>
			<value>2</value>
		</equals>
        </condition>
    </enable>
    <gain>1</gain>
	<output>/controls/engines/engine[1]/propeller-pitch</output>
  </filter>
 
  
  <!--Positive Thrust-->
  <filter>
    <name>Positive Thrust L</name>
    <type>gain</type>
    <input>
		<property>/controls/engines/engine[0]/throttle-int</property>
    </input>
    <enable>
        <condition>
		<greater-than-equals>
			<property>/controls/engines/engine[0]/condition-lever-state</property>
			<value>1</value>
		</greater-than-equals>
        </condition>
    </enable>
    <gain>1</gain>
	<output>fdm/jsbsim/fcs/throttle-cmd-norm[0]</output>
	<output>fdm/jsbsim/fcs/throttle-pos-norm[0]</output>
  </filter>
  <filter>
    <name>Positive Thrust R</name>
    <type>gain</type>
    <input>
		<property>/controls/engines/engine[1]/throttle-int</property>
    </input>
    <enable>
        <condition>
		<greater-than-equals>
			<property>/controls/engines/engine[1]/condition-lever-state</property>
			<value>1</value>
		</greater-than-equals>
        </condition>
    </enable>
    <gain>1</gain>
	<output>fdm/jsbsim/fcs/throttle-cmd-norm[1]</output>
	<output>fdm/jsbsim/fcs/throttle-pos-norm[1]</output>
  </filter>
  
  
  <!--FUEL CUTOFF: no power at all-->
  
  <filter>
    <name>CUTOFF L</name>
    <type>gain</type>
    <input>
	    <value>0</value>
    </input>
    <enable>
        <condition>
		<equals>
			<property>/controls/engines/engine[0]/condition-lever-state</property>
			<value>0</value>
		</equals>
        </condition>
    </enable>
    <gain>1</gain>
	<output>fdm/jsbsim/fcs/throttle-cmd-norm[0]</output>
	<output>fdm/jsbsim/fcs/throttle-pos-norm[0]</output>
  </filter>
  
  <filter>
    <name>CUTOFF R</name>
    <type>gain</type>
    <input>
	    <value>0</value>
    </input>
    <enable>
        <condition>
		<equals>
			<property>/controls/engines/engine[1]/condition-lever-state</property>
			<value>0</value>
		</equals>
        </condition>
    </enable>
    <gain>1</gain>
	<output>fdm/jsbsim/fcs/throttle-cmd-norm[0]</output>
	<output>fdm/jsbsim/fcs/throttle-pos-norm[0]</output>
  </filter>
  

</PropertyList>
